10193300-Electronic-Design
==========================

10193300-Electronic Design Work

"光控电子琴"

原理
---------------------
硬件:

  使用LM324, 一枚运放产生约1kHz方波驱动绿色LED(应对硫化镉LDR);

  LDR接收光信号后经过高通滤波器由一枚运放放大再检波得到反射亮度对应的电压信号, 对于50Hz的工频干扰有25dB的衰减;
  
  后级两枚运放组成简易VCO, 对于输入电压信号调整在参考电压和VCC之间能产生震荡, 电压越高频率越高, 按要求控制覆盖200~3000Hz.

  
软件:

  软件部分包含数码管显示, 输入信号捕获, 输出方波和触摸按键.

  cap_cnt.c 使用捕获计数方式计算输入信号频率, 结果更新频率最大120Hz, 精度不小于1%, 硬件上使用TA0CCR1, TA0OV

  disp.c 使用P2口和三位P1口驱动共阳极数码管, 通过TA0OV刷新, 刷新频率最高60Hz, 通过影子变量, 显示内容更新频率可自由设置.

  generator.c 使用连续计数模式下递增比较, 翻转动作产生指定频率的方波, 中断优先级最高, 硬件上使用TA0CCR0

  isr_proxy.c 所占用的中断资源的接口.

  touch*.c 使用IO翻转时由于外部RC参数变化导致的门限翻转延时不同的简易方法来检测触摸输入, 硬件上使用P1IE.
  
